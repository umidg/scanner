(this.webpackJsonpbarcodereader=this.webpackJsonpbarcodereader||[]).push([[0],{30:function(e,t,n){e.exports=n(67)},35:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(23),o=n.n(c),l=(n(35),n(3)),i=n(12),u=n.n(i),s=n(24),d=n.n(s),m=(n(36),function(e){var t,n,c=Object(a.useState)(),o=Object(l.a)(c,2),i=o[0],u=o[1],s=Object(a.useRef)(null),m=Object(a.useRef)(null),h=Object(a.useState)({unit:"%",width:30,aspect:16/9}),f=Object(l.a)(h,2),g=f[0],p=f[1],v=Object(a.useState)(null),b=Object(l.a)(v,2),E=b[0],w=b[1],O=Object(a.useCallback)((function(e){s.current=e}),[]);return Object(a.useEffect)((function(){if(E&&m.current&&s.current){console.log(m,"preview");var e=s.current,t=m.current,n=E,a=e.naturalWidth/e.width,r=e.naturalHeight/e.height,c=t.getContext("2d");t.width=4*n.width,t.height=4*n.height,c.setTransform(4,0,0,4,0,0),c.imageSmoothingEnabled=!1,c.drawImage(e,n.x*a,n.y*r,n.width*a,n.height*r,0,0,n.width,n.height),console.log(m,"ploader")}}),[E]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h2",null,"Barcode and text scanner"),r.a.createElement("div",null,r.a.createElement("h4",null,"Please upload an image "),r.a.createElement("input",{type:"file",accept:"image/*",onChange:function(e){if(e.target.files&&e.target.files.length>0){var t=new FileReader;t.addEventListener("load",(function(){return u(t.result)})),t.readAsDataURL(e.target.files[0])}}}))),r.a.createElement(d.a,{src:i,onImageLoaded:O,crop:g,onChange:function(e){return p(e)},onComplete:function(e){w(e)},style:{width:"60%",height:"60%",margin:"5% 20% 0 20%"}}),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("canvas",{ref:m,style:{width:null!==(t=null===E||void 0===E?void 0:E.width)&&void 0!==t?t:0,height:null!==(n=null===E||void 0===E?void 0:E.height)&&void 0!==n?n:0}})),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},E?r.a.createElement("button",{style:{margin:"5vh"},onClick:function(){return e.imgCropped(m)}},"Scan"):r.a.createElement("p",null)))}),h=n(1),f=n.n(h),g=n(13),p=n(25),v=n(26),b=n(29),E=n(28),w=n(27),O=n(7),j=n.n(O),x=function(e){Object(b.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).getCanv=function(){var e=Object(g.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.a.decodeSingle({locator:{halfSample:!0,patchSize:"small"},decoder:{readers:["code_128_reader","code_39_reader","code_93_reader","i2of5_reader","code_39_vin_reader","ean_reader","upc_reader","upc_e_reader"]},locate:!0,src:j.a.fromCanvas(t.current.current)},(function(e){e&&e.hasOwnProperty("codeResult")?(n=e.codeResult.code,r()):(n="Couldn't find barcode. Image not clear enough.",r())})),r=function(){a.setState({imgUrl:j.a.fromCanvas(t.current.current),barcode:n})},a.doOCR(j.a.fromCanvas(t.current.current));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.doOCR=function(){var e=Object(g.a)(f.a.mark((function e(t){var n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({text:"Please wait"}),n=Object(w.createWorker)({logger:function(e){return console.log(e)}}),e.next=4,n.load();case 4:return e.next=6,n.loadLanguage("eng");case 6:return e.next=8,n.initialize("eng");case 8:return e.next=10,n.recognize(t);case 10:return r=e.sent,""!=(c=r.data.text)?a.setState({text:c}):a.setState({text:"Couldn't find any text. Image not clear enough."}),e.next=15,n.terminate();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={imgUrl:"",barcode:"",text:""},a}return Object(v.a)(n,[{key:"componentWillReceiveProps",value:function(e){void 0==e.img.current.current&&null==e.img.current.current||this.getCanv(e.img)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card"},this.state.barcode&&r.a.createElement("p",null,r.a.createElement("span",{style:{fontWeight:"800"}},"Barcode:")," ",this.state.barcode)),r.a.createElement("div",{className:"card"},this.state.text&&r.a.createElement("p",null,r.a.createElement("span",{style:{fontWeight:"800"}},"Text:")," ",this.state.text))))}}]),n}(a.Component),y=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useRef)(null),i=Object(a.useState)(!0),u=Object(l.a)(i,2),s=u[0],d=u[1];return Object(a.useEffect)((function(){console.log("changed")}),[s,n]),r.a.createElement(r.a.Fragment,null,r.a.createElement(m,{imgCropped:function(e){o.current=e,c(e),d(!s)}}),r.a.createElement(x,{img:o}))};var C=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.1a55410f.chunk.js.map